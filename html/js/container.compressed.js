var gadgets=gadgets||{};gadgets.util=function(){function F(){var K;var J=document.location.href;var H=J.indexOf("?");var I=J.indexOf("#");if(I===-1){K=J.substr(H+1)}else{K=[J.substr(H+1,I-H-1),"&",J.substr(I+1)].join("")}return K.split("&")}var D=null;var C={};var E=[];var A={0:false,10:true,13:true,34:true,39:true,60:true,62:true,92:true,8232:true,8233:true};function B(H,I){return String.fromCharCode(I)}function G(H){C=H["core.util"]||{}}if(gadgets.config){gadgets.config.register("core.util",null,G)}return{getUrlParameters:function(){if(D!==null){return D}D={};var K=F();var N=window.decodeURIComponent?decodeURIComponent:unescape;for(var I=0,H=K.length;I<H;++I){var M=K[I].indexOf("=");if(M===-1){continue}var L=K[I].substring(0,M);var J=K[I].substring(M+1);J=J.replace(/\+/g," ");D[L]=N(J)}return D},makeClosure:function(K,M,L){var J=[];for(var I=2,H=arguments.length;I<H;++I){J.push(arguments[I])}return function(){var N=J.slice();for(var P=0,O=arguments.length;P<O;++P){N.push(arguments[P])}return M.apply(K,N)}},makeEnum:function(I){var K={};for(var J=0,H;H=I[J];++J){K[H]=H}return K},getFeatureParameters:function(H){return typeof C[H]==="undefined"?null:C[H]},hasFeature:function(H){return typeof C[H]!=="undefined"},registerOnLoadHandler:function(H){E.push(H)},runOnLoadHandlers:function(){for(var I=0,H=E.length;I<H;++I){E[I]()}},escape:function(H,L){if(!H){return H}else{if(typeof H==="string"){return gadgets.util.escapeString(H)}else{if(typeof H==="array"){for(var K=0,I=H.length;K<I;++K){H[K]=gadgets.util.escape(H[K])}}else{if(typeof H==="object"&&L){var J={};for(var M in H){if(H.hasOwnProperty(M)){J[gadgets.util.escapeString(M)]=gadgets.util.escape(H[M],true)}}return J}}}}return H},escapeString:function(L){var I=[],K,M;for(var J=0,H=L.length;J<H;++J){K=L.charCodeAt(J);M=A[K];if(M===true){I.push("&#",K,";")}else{if(M!==false){I.push(L.charAt(J))}}}return I.join("")},unescapeString:function(H){return H.replace(/&#([0-9]+);/g,B)}}}();gadgets.util.getUrlParameters();var gadgets=gadgets||{};gadgets.json=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i])||"null")}return"["+a.join(",")+"]"}for(k in value){if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}return false}}}();var gadgets=gadgets||{};gadgets.rpc=function(){var K={};var N=[];var I={};var C={};var L={};var H=0;var J={};var D=gadgets.util.getUrlParameters();L[".."]=D.rpctoken||D.ifpctok||0;var E=typeof document.postMessage==="function"?"dpm":typeof window.postMessage==="function"?"wpm":"ifpc";if(E==="dpm"||E==="wpm"){document.addEventListener("message",function(O){B(gadgets.json.parse(O.data))},false)}K[""]=function(){throw new Error("Unknown RPC service: "+this.s)};K.__cb=function(P,O){var Q=J[P];if(Q){delete J[P];Q(O)}};function G(Q){var S=gadgets.json.stringify;var O=[];for(var R=0,P=Q.length;R<P;++R){O.push(encodeURIComponent(S(Q[R])))}return O.join("&")}function B(S){if(S&&typeof S.s==="string"&&typeof S.f==="string"&&S.a instanceof Array){if(L[S.f]){if(L[S.f]!=S.t){throw new Error("Invalid auth token.")}}if(E==="ifpc"){if(S.f===".."){try{var P=window.frameElement;if(typeof P.__g2c_rpc==="function"&&typeof P.__g2c_rpc.__c2g_rpc!="function"){P.__g2c_rpc.__c2g_rpc=function(T){B(gadgets.json.parse(T))}}}catch(R){}}else{var Q=document.getElementById(S.f);if(Q&&typeof Q.__g2c_rpc!="function"){Q.__g2c_rpc=function(T){B(gadgets.json.parse(T))}}}}var O=(K[S.s]||K[""]).apply(S,S.a);if(S.c){gadgets.rpc.call(S.f,"__cb",null,S.c,O)}}}function F(R){var P;for(var O=N.length-1;O>=0;--O){var S=N[O];try{if(S&&(S.recyclable||S.readyState==="complete")){S.parentNode.removeChild(S);if(window.ActiveXObject){N[O]=S=null;N.splice(O,1)}else{S.recyclable=false;P=S;break}}}catch(Q){}}if(!P){P=document.createElement("iframe");P.style.border=P.style.width=P.style.height="0px";P.style.visibility="hidden";P.style.position="absolute";P.onload=function(){this.recyclable=true};N.push(P)}P.src=R;setTimeout(function(){document.body.appendChild(P)},0)}if(gadgets.config){function M(O){if(O.rpc.parentRelayUrl.substring(0,7)==="http://"){I[".."]=O.rpc.parentRelayUrl}else{var S=document.location.search.substring(0).split("&");var R="";for(var P=0,Q;Q=S[P];++P){if(Q.indexOf("parent=")===0){R=decodeURIComponent(Q.substring(7));break}}I[".."]=R+O.rpc.parentRelayUrl}C[".."]=!!O.rpc.useLegacyProtocol}var A={parentRelayUrl:gadgets.config.NonEmptyStringValidator};gadgets.config.register("rpc",A,M)}return{register:function(P,O){K[P]=O},unregister:function(O){delete K[O]},registerDefault:function(O){K[""]=O},unregisterDefault:function(){delete K[""]},call:function(X,T,Y,W){++H;X=X||"..";if(Y){J[H]=Y}var V;if(X===".."){V=window.name}else{V=".."}var Q=gadgets.json.stringify({s:T,f:V,c:Y?H:0,a:Array.prototype.slice.call(arguments,3),t:L[X]});switch(E){case"dpm":var Z=X===".."?parent.document:frames[X].document;Z.postMessage(Q);break;case"wpm":var U=X===".."?parent:frames[X];U.postMessage(Q);break;default:try{if(V===".."){var R=document.getElementById(X);if(typeof R.__g2c_rpc.__c2g_rpc==="function"){R.__g2c_rpc.__c2g_rpc(Q);return }}else{if(typeof window.frameElement.__g2c_rpc==="function"){window.frameElement.__g2c_rpc(Q);return }}}catch(S){}var P=gadgets.rpc.getRelayUrl(X);var O;if(C[X]){O=[P,"#",G([V,H,1,0,G([V,T,"","",V].concat(Array.prototype.slice.call(arguments,3)))])].join("")}else{O=[P,"#",X,"&",V,"@",H,"&1&0&",encodeURIComponent(Q)].join("")}F(O)}},getRelayUrl:function(O){return I[O]},setRelayUrl:function(P,O,Q){I[P]=O;C[P]=!!Q},setAuthToken:function(O,P){L[O]=P},getRelayChannel:function(){return E},receive:function(O){if(O.length>4){B(gadgets.json.parse(decodeURIComponent(O[O.length-1])))}}}}();var goog=goog||{};goog.net=goog.net||{};goog.net.cookies=goog.net.cookies||{};goog.JsType_={UNDEFINED:"undefined"};goog.isDef=function(A){return typeof A!=goog.JsType_.UNDEFINED};goog.net.cookies.set=function(C,I,H,B,D){if(/;=/g.test(C)){throw new Error('Invalid cookie name "'+C+'"')}if(/;/g.test(I)){throw new Error('Invalid cookie value "'+I+'"')}if(!goog.isDef(H)){H=-1}var F=D?";domain="+D:"";var J=B?";path="+B:"";var E;if(H<0){E=""}else{if(H==0){var G=new Date(1970,1,1);E=";expires="+G.toUTCString()}else{var A=new Date((new Date).getTime()+H*1000);E=";expires="+A.toUTCString()}}document.cookie=C+"="+I+F+J+E};goog.net.cookies.get=function(B,G){var F=B+"=";var D=String(document.cookie);for(var H=-1;(H=D.indexOf(F,H+1))>=0;){var C=H;while(--C>=0){var E=D.charAt(C);if(E==";"){C=-1;break}}if(C==-1){var A=D.indexOf(";",H);if(A<0){A=D.length}return D.substring(H+F.length,A)}}return G};goog.net.cookies.remove=function(B,A,C){var D=goog.net.cookies.containsKey(B);goog.net.cookies.set(B,"",0,A,C);return D};goog.net.cookies.getKeyValues_=function(){var E=String(document.cookie);var G=E.split(/\s*;\s*/);var F=[],A=[],C,B;for(var D=0;B=G[D];D++){C=B.indexOf("=");if(C==-1){F.push("");A.push(B)}else{F.push(B.substring(0,C));A.push(B.substring(C+1))}}return{keys:F,values:A}};goog.net.cookies.getKeys=function(){return goog.net.cookies.getKeyValues_().keys};goog.net.cookies.getValues=function(){return goog.net.cookies.getKeyValues_().values};goog.net.cookies.isEmpty=function(){return document.cookie==""};goog.net.cookies.getCount=function(){var A=String(document.cookie);if(A==""){return 0}var B=A.split(/\s*;\s*/);return B.length};goog.net.cookies.containsKey=function(B){var A={};return goog.net.cookies.get(B,A)!==A};goog.net.cookies.containsValue=function(C){var A=goog.net.cookies.getKeyValues_().values;for(var B=0;B<A.length;B++){if(A[B]==C){return true}}return false};goog.net.cookies.clear=function(){var B=goog.net.cookies.getKeyValues_().keys;for(var A=B.length-1;A>=0;A--){goog.net.cookies.remove(B[A])}};goog.net.cookies.MAX_COOKIE_LENGTH=3950;Function.prototype.inherits=function(A){function B(){}B.prototype=A.prototype;this.superClass_=A.prototype;this.prototype=new B();this.prototype.constructor=this};var gadgets=gadgets||{};gadgets.error={};gadgets.error.SUBCLASS_RESPONSIBILITY="subclass responsibility";gadgets.error.TO_BE_DONE="to be done";gadgets.log=function(A){if(window.console&&console.log){console.log(A)}else{var B=document.createElement("div");B.className="gadgets-log-entry";B.innerHTML=A;document.body.appendChild(B)}};gadgets.callAsyncAndJoin=function(E,A,D){var F=E.length;var C=[];for(var B=0;B<E.length;B++){var G=function(H){E[H].call(D,function(I){C[H]=I;if(--F==0){A(C)}})};G(B)}};gadgets.Extensible=function(){};gadgets.Extensible.prototype.setDependencies=function(A){for(var B in A){this[B]=A[B]}};gadgets.Extensible.prototype.getDependencies=function(A){return this[A]};gadgets.UserPrefStore=function(){};gadgets.UserPrefStore.prototype.getPrefs=function(A){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.UserPrefStore.prototype.savePrefs=function(A){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.DefaultUserPrefStore=function(){gadgets.UserPrefStore.call(this)};gadgets.DefaultUserPrefStore.inherits(gadgets.UserPrefStore);gadgets.DefaultUserPrefStore.prototype.getPrefs=function(A){};gadgets.DefaultUserPrefStore.prototype.savePrefs=function(A){};gadgets.GadgetService=function(){};gadgets.GadgetService.prototype.setHeight=function(B,A){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setTitle=function(A,B){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setUserPref=function(A){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.IfrGadgetService=function(){gadgets.GadgetService.call(this);gadgets.rpc.register("resize_iframe",this.setHeight);gadgets.rpc.register("set_pref",this.setUserPref);gadgets.rpc.register("set_title",this.setTitle);gadgets.rpc.register("requestNavigateTo",this.requestNavigateTo)};gadgets.IfrGadgetService.inherits(gadgets.GadgetService);gadgets.IfrGadgetService.prototype.setHeight=function(A){if(A>gadgets.container.maxheight_){A=gadgets.container.maxheight_}var B=document.getElementById(this.f);if(B){B.style.height=A+"px"}};gadgets.IfrGadgetService.prototype.setTitle=function(B){var A=document.getElementById(this.f+"_title");if(A){A.innerHTML=B.replace(/&/g,"&amp;").replace(/</g,"&lt;")}};gadgets.IfrGadgetService.prototype.setUserPref=function(H,C,E){var G=this.getGadgetIdFromModuleId(this.f);var F=gadgets.container.getGadget(G);var B=F.getUserPrefs();for(var D=1,A=arguments.length;D<A;D+=2){B[arguments[D]]=arguments[D+1]}F.setUserPrefs(B)};gadgets.IfrGadgetService.prototype.requestNavigateTo=function(A,D){var E=this.getGadgetIdFromModuleId(this.f);var B=this.getUrlForView(A);if(D){var C=JSON.stringify(D);if(C.length>0){B+="&appParams="+encodeURIComponent(C)}}if(B&&document.location.href.indexOf(B)==-1){document.location.href=B}};gadgets.IfrGadgetService.prototype.getUrlForView=function(A){if(A==="canvas"){return"/canvas"}else{if(A==="profile"){return"/profile"}else{return null}}};gadgets.IfrGadgetService.prototype.getGadgetIdFromModuleId=function(A){return parseInt(A.match(/_([0-9]+)$/)[1],10)};gadgets.LayoutManager=function(){};gadgets.LayoutManager.prototype.getGadgetChrome=function(A){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.StaticLayoutManager=function(){gadgets.LayoutManager.call(this)};gadgets.StaticLayoutManager.inherits(gadgets.LayoutManager);gadgets.StaticLayoutManager.prototype.setGadgetChromeIds=function(A){this.gadgetChromeIds_=A};gadgets.StaticLayoutManager.prototype.getGadgetChrome=function(B){var A=this.gadgetChromeIds_[B.id];return A?document.getElementById(A):null};gadgets.FloatLeftLayoutManager=function(A){gadgets.LayoutManager.call(this);this.layoutRootId_=A};gadgets.FloatLeftLayoutManager.inherits(gadgets.LayoutManager);gadgets.FloatLeftLayoutManager.prototype.getGadgetChrome=function(C){var B=document.getElementById(this.layoutRootId_);if(B){var A=document.createElement("div");A.className="gadgets-gadget-chrome";A.style.cssFloat="left";B.appendChild(A);return A}else{return null}};gadgets.Gadget=function(B){this.userPrefs_={};if(B){for(var A in B){if(B.hasOwnProperty(A)){this[A]=B[A]}}}if(!this.secureToken){this.secureToken="john.doe:john.doe:appid:synd:url:0"}};gadgets.Gadget.prototype.getUserPrefs=function(){return this.userPrefs_};gadgets.Gadget.prototype.setUserPrefs=function(A){this.userPrefs_=A;gadgets.container.userPrefStore.savePrefs(this)};gadgets.Gadget.prototype.getUserPref=function(A){return this.userPrefs_[A]};gadgets.Gadget.prototype.setUserPref=function(A,B){this.userPrefs_[A]=B;gadgets.container.userPrefStore.savePrefs(this)};gadgets.Gadget.prototype.render=function(A){if(A){this.getContent(function(B){A.innerHTML=B})}};gadgets.Gadget.prototype.getContent=function(A){gadgets.callAsyncAndJoin([this.getTitleBarContent,this.getUserPrefsDialogContent,this.getMainContent],function(B){A(B.join(""))},this)};gadgets.Gadget.prototype.getTitleBarContent=function(A){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.Gadget.prototype.getUserPrefsDialogContent=function(A){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.Gadget.prototype.getMainContent=function(A){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.Gadget.prototype.getAdditionalParams=function(){return""};gadgets.IfrGadget=function(A){gadgets.Gadget.call(this,A);this.serverBase_="../../"};gadgets.IfrGadget.inherits(gadgets.Gadget);gadgets.IfrGadget.prototype.GADGET_IFRAME_PREFIX_="remote_iframe_";gadgets.IfrGadget.prototype.CONTAINER="default";gadgets.IfrGadget.prototype.cssClassGadget="gadgets-gadget";gadgets.IfrGadget.prototype.cssClassTitleBar="gadgets-gadget-title-bar";gadgets.IfrGadget.prototype.cssClassTitle="gadgets-gadget-title";gadgets.IfrGadget.prototype.cssClassTitleButtonBar="gadgets-gadget-title-button-bar";gadgets.IfrGadget.prototype.cssClassGadgetUserPrefsDialog="gadgets-gadget-user-prefs-dialog";gadgets.IfrGadget.prototype.cssClassGadgetUserPrefsDialogActionBar="gadgets-gadget-user-prefs-dialog-action-bar";gadgets.IfrGadget.prototype.cssClassTitleButton="gadgets-gadget-title-button";gadgets.IfrGadget.prototype.cssClassGadgetContent="gadgets-gadget-content";gadgets.IfrGadget.prototype.rpcToken=(2147483647*Math.random())|0;gadgets.IfrGadget.prototype.rpcRelay="files/rpc_relay.html";gadgets.IfrGadget.prototype.getTitleBarContent=function(A){A('<div id="'+this.cssClassTitleBar+"-"+this.id+'" class="'+this.cssClassTitleBar+'"><span id="'+this.getIframeId()+'_title" class="'+this.cssClassTitle+'">'+(this.title?this.title:"Title")+'</span> | <span class="'+this.cssClassTitleButtonBar+'"><a href="#" onclick="gadgets.container.getGadget('+this.id+').handleOpenUserPrefsDialog();return false;" class="'+this.cssClassTitleButton+'">settings</a> <a href="#" onclick="gadgets.container.getGadget('+this.id+').handleToggle();return false;" class="'+this.cssClassTitleButton+'">toggle</a></span></div>')};gadgets.IfrGadget.prototype.getUserPrefsDialogContent=function(A){A('<div id="'+this.getUserPrefsDialogId()+'" class="'+this.cssClassGadgetUserPrefsDialog+'"></div>')};gadgets.IfrGadget.prototype.setServerBase=function(A){this.serverBase_=A};gadgets.IfrGadget.prototype.getServerBase=function(){return this.serverBase_};gadgets.IfrGadget.prototype.getMainContent=function(A){var B=this.getIframeId();gadgets.rpc.setRelayUrl(B,this.serverBase_+this.rpcRelay);gadgets.rpc.setAuthToken(B,this.rpcToken);A('<div class="'+this.cssClassGadgetContent+'"><iframe id="'+B+'" name="'+B+'" class="'+this.cssClassGadget+'" src="'+this.getIframeUrl()+'" frameborder="no" scrolling="no"'+(this.height?' height="'+this.height+'"':"")+(this.width?' width="'+this.width+'"':"")+"></iframe></div>")};gadgets.IfrGadget.prototype.getIframeId=function(){return this.GADGET_IFRAME_PREFIX_+this.id};gadgets.IfrGadget.prototype.getUserPrefsDialogId=function(){return this.getIframeId()+"_userPrefsDialog"};gadgets.IfrGadget.prototype.getIframeUrl=function(){return this.serverBase_+"ifr?url="+encodeURIComponent(this.specUrl)+"&container="+this.CONTAINER+"&mid="+this.id+"&nocache="+gadgets.container.nocache_+"&country="+gadgets.container.country_+"&lang="+gadgets.container.language_+"&view="+gadgets.container.view_+(this.specVersion?"&v="+this.specVersion:"")+(gadgets.container.parentUrl_?"&parent="+encodeURIComponent(gadgets.container.parentUrl_):"")+(this.debug?"&debug=1":"")+this.getAdditionalParams()+this.getUserPrefsParams()+"#rpctoken="+this.rpcToken+(this.secureToken?"&st="+this.secureToken:"")+(this.viewParams?"&view-params="+encodeURIComponent(JSON.stringify(this.viewParams)):"")+(this.hashData?"&"+this.hashData:"")};gadgets.IfrGadget.prototype.getUserPrefsParams=function(){var C="";if(this.getUserPrefs()){for(var A in this.getUserPrefs()){var B=this.getUserPref(A);C+="&up_"+encodeURIComponent(A)+"="+encodeURIComponent(B)}}return C};gadgets.IfrGadget.prototype.handleToggle=function(){var B=document.getElementById(this.getIframeId());if(B){var A=B.parentNode;var C=A.style.display;A.style.display=C?"":"none"}};gadgets.IfrGadget.prototype.handleOpenUserPrefsDialog=function(){if(this.userPrefsDialogContentLoaded){this.showUserPrefsDialog()}else{var C=this;var B="ig_callback_"+this.id;window[B]=function(D){C.userPrefsDialogContentLoaded=true;C.buildUserPrefsDialog(D);C.showUserPrefsDialog()};var A=document.createElement("script");A.src="http://gmodules.com/ig/gadgetsettings?url="+this.specUrl+"&mid="+this.id+"&output=js"+this.getUserPrefsParams();document.body.appendChild(A)}};gadgets.IfrGadget.prototype.buildUserPrefsDialog=function(A){var B=document.getElementById(this.getUserPrefsDialogId());B.innerHTML=A+'<div class="'+this.cssClassGadgetUserPrefsDialogActionBar+'"><input type="button" value="Save" onclick="gadgets.container.getGadget('+this.id+').handleSaveUserPrefs()"> <input type="button" value="Cancel" onclick="gadgets.container.getGadget('+this.id+').handleCancelUserPrefs()"></div>';B.childNodes[0].style.display=""};gadgets.IfrGadget.prototype.showUserPrefsDialog=function(A){var B=document.getElementById(this.getUserPrefsDialogId());B.style.display=(A||A==undefined)?"":"none"};gadgets.IfrGadget.prototype.hideUserPrefsDialog=function(){this.showUserPrefsDialog(false)};gadgets.IfrGadget.prototype.handleSaveUserPrefs=function(){this.hideUserPrefsDialog();var D={};var A=document.getElementById("m_"+this.id+"_numfields").value;for(var E=0;E<A;E++){var B=document.getElementById("m_"+this.id+"_"+E);if(B.type!="hidden"){var G="m_"+this.id+"_up_";var C=B.name.substring(G.length);var F=B.value;D[C]=F}}this.setUserPrefs(D);this.refresh()};gadgets.IfrGadget.prototype.handleCancelUserPrefs=function(){this.hideUserPrefsDialog()};gadgets.IfrGadget.prototype.refresh=function(){var A=this.getIframeId();document.getElementById(A).src=this.getIframeUrl()};gadgets.Container=function(){this.gadgets_={};this.parentUrl_="http://"+document.location.host;this.country_="ALL";this.language_="ALL";this.view_="default";this.nocache_=1;this.maxheight_=2147483647};gadgets.Container.inherits(gadgets.Extensible);gadgets.Container.prototype.gadgetClass=gadgets.Gadget;gadgets.Container.prototype.userPrefStore=new gadgets.DefaultUserPrefStore();gadgets.Container.prototype.gadgetService=new gadgets.GadgetService();gadgets.Container.prototype.layoutManager=new gadgets.StaticLayoutManager();gadgets.Container.prototype.setParentUrl=function(A){this.parentUrl_=A};gadgets.Container.prototype.setCountry=function(A){this.country_=A};gadgets.Container.prototype.setNoCache=function(A){this.nocache_=A};gadgets.Container.prototype.setLanguage=function(A){this.language_=A};gadgets.Container.prototype.setView=function(A){this.view_=A};gadgets.Container.prototype.setMaxHeight=function(A){this.maxheight_=A};gadgets.Container.prototype.getGadgetKey_=function(A){return"gadget_"+A};gadgets.Container.prototype.getGadget=function(A){return this.gadgets_[this.getGadgetKey_(A)]};gadgets.Container.prototype.createGadget=function(A){return new this.gadgetClass(A)};gadgets.Container.prototype.addGadget=function(A){A.id=this.getNextGadgetInstanceId();A.setUserPrefs(this.userPrefStore.getPrefs(A));this.gadgets_[this.getGadgetKey_(A.id)]=A};gadgets.Container.prototype.addGadgets=function(A){for(var B=0;B<A.length;B++){this.addGadget(A[B])}};gadgets.Container.prototype.renderGadgets=function(){for(var A in this.gadgets_){this.renderGadget(this.gadgets_[A])}};gadgets.Container.prototype.renderGadget=function(A){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.Container.prototype.nextGadgetInstanceId_=0;gadgets.Container.prototype.getNextGadgetInstanceId=function(){return this.nextGadgetInstanceId_++};gadgets.Container.prototype.refreshGadgets=function(){for(var A in this.gadgets_){this.gadgets_[A].refresh()}};gadgets.IfrContainer=function(){gadgets.Container.call(this)};gadgets.IfrContainer.inherits(gadgets.Container);gadgets.IfrContainer.prototype.gadgetClass=gadgets.IfrGadget;gadgets.IfrContainer.prototype.gadgetService=new gadgets.IfrGadgetService();gadgets.IfrContainer.prototype.setParentUrl=function(A){if(!A.match(/^http[s]?:\/\//)){A=document.location.href.match(/^[^?#]+\//)[0]+A}this.parentUrl_=A};gadgets.IfrContainer.prototype.renderGadget=function(B){var A=this.layoutManager.getGadgetChrome(B);B.render(A)};gadgets.container=new gadgets.IfrContainer();gadgets.CookieBasedUserPrefStore=function(){gadgets.UserPrefStore.call(this)};gadgets.CookieBasedUserPrefStore.inherits(gadgets.UserPrefStore);gadgets.CookieBasedUserPrefStore.prototype.USER_PREFS_PREFIX="gadgetUserPrefs-";gadgets.CookieBasedUserPrefStore.prototype.getPrefs=function(D){var F={};var G=this.USER_PREFS_PREFIX+D.id;var C=goog.net.cookies.get(G);if(C){var B=C.split("&");for(var E=0;E<B.length;E++){var I=B[E].split("=");var A=decodeURIComponent(I[0]);var H=decodeURIComponent(I[1]);F[A]=H}}return F};gadgets.CookieBasedUserPrefStore.prototype.savePrefs=function(D){var C=[];for(var A in D.getUserPrefs()){var B=D.getUserPref(A);var F=encodeURIComponent(A)+"="+encodeURIComponent(B);C.push(F)}var G=this.USER_PREFS_PREFIX+D.id;var E=C.join("&");goog.net.cookies.set(G,E)};gadgets.Container.prototype.userPrefStore=new gadgets.CookieBasedUserPrefStore();